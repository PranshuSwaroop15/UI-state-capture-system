# UI-State-Capture System

A **CLI-based automation framework** built using **Python** and **Playwright**.
The system accepts natural-language prompts, converts them into structured automation plans, and executes them step-by-step while capturing screenshots and state information.

---

## Overview

This project enables you to automate tasks inside web applications (e.g., **Linear**, **Notion**) by simply describing what you want in plain English.
The system breaks down the prompt, maps it to the relevant application and action, and performs UI automation based on saved login states.

---

## Core Components

### `__init__.py`

* Serves as the **entry point** and starts the CLI interface.
* After each prompt:

  * Creates a **timestamped directory** inside the `runs/` folder.
  * Stores:

    * Raw prompt
    * Screenshots
    * Run logs
    * Extracted steps
    * State URLs / metadata
* Connects the planner and executor to run the complete workflow.

---

### `planner.py`

* Processes the raw prompt by:

  * Lowercasing
  * Removing unnecessary spaces
  * Cleaning the text
* Uses YAML configurations (`app_names.yaml`, `intents.yaml`) to:

  * Identify the **closest matching app**
  * Identify the **closest matching task/intent**
* Breaks down the prompt into a series of **structured steps** based on:

  * The appâ€™s UI flow
  * Intent definition
  * Config-driven rules

This component transforms natural language into an executable automation plan.

---

### `executor.py`

* Executes the structured steps generated by the planner.
* Uses Playwright to:

  * Load the app using saved login state
  * Click, fill, and assert UI elements
  * Perform actions in the correct sequence
* Captures a **screenshot at every step** to make the workflow easy to debug and trace.

---

### `save_app_state.py`

* Used to generate and store the logged-in state of apps (e.g., Notion, Linear).
* Saves authenticated state as `<app>_state.json` inside the `states/` directory.
* Allows automation to run without logging in every time.

---

## Project Structure

```bash
.
â”œâ”€â”€ .agent_env/                         # Virtual environment (ignored)
â”‚
â”œâ”€â”€ agent/
â”‚   â”œâ”€â”€ __pycache__/                    # Python cache (ignored)
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                         # Configuration directory
â”‚   â”‚   â”œâ”€â”€ app_names.yaml              # Supported app names
â”‚   â”‚   â””â”€â”€ intents.yaml                # Mapping for intents and keywords
â”‚   â”‚
â”‚   â”œâ”€â”€ __init__.py                     # CLI entrypoint
â”‚   â”œâ”€â”€ executor.py                     # Executes UI steps
â”‚   â””â”€â”€ planner.py                      # Converts prompts to structured plans
â”‚
â”œâ”€â”€ runs/
â”‚   â””â”€â”€ <timestamped-run>/              # Screenshots, logs, steps per run
â”‚       â”œâ”€â”€ 01_open.png
â”‚       â”œâ”€â”€ 02_click.png
â”‚       â”œâ”€â”€ 03_fill.png
â”‚       â”œâ”€â”€ 04_assert.png
â”‚       â”œâ”€â”€ prompt.txt
â”‚       â”œâ”€â”€ run.json
â”‚       â”œâ”€â”€ run.log
â”‚       â”œâ”€â”€ states.json
â”‚       â””â”€â”€ steps.yaml
â”‚
â”œâ”€â”€ states/                              # Pre-saved authenticated states
â”‚   â”œâ”€â”€ linear_state.json
â”‚   â””â”€â”€ notion_state.json
â”‚
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ save_app_state.py               # Saves login session state for each app
â”‚
â”œâ”€â”€ .gitignore                           # Ignore envs, logs, screenshots, states
â”œâ”€â”€ README.md
â””â”€â”€ requirements.txt
```

---

## ðŸ›  Tech Stack

* **Python**
* **Playwright**
* **YAML** (for intents & app config)

---

## How to Run the Project

### 1. Install dependencies

```bash
pip install -r requirements.txt
```

### 2. Install Playwright browsers

```bash
playwright install
```

---

## Step 1 â€” Create Saved Login States

Before running automations, save the authenticated app state:

```bash
python scripts/save_app_state.py <webapp-name>
```

Example:

```bash
python scripts/save_app_state.py notion
```

This will store the logged-in session in `states/notion_state.json`.

---

## Step 2 â€” Run the Automation System

Start the CLI:

```bash
python agent/__init__.py
```

Enter a natural-language prompt, such as:

```
Create a project in Linear called Test
```

The system will:

1. Parse the prompt
2. Identify the app + intent
3. Build a structured plan
4. Execute it step-by-step
5. Save screenshots + logs in `runs/`


